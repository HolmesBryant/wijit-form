<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Wijit-Form Web Component</title>
    <link rel="stylesheet" href="/styles.css">
    <script type="module" src="wijit-form.js"></script>
    <script type="module" src="wijit-icon01.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/gh/zerodevx/zero-md@2/dist/zero-md.min.js"></script>

    <!-----------------------------------------
     You can change the colors of the form by changing the values of these css variables
    ------------------------------------------->
    <style>


    </style>
</head>
<body>
    <details>
        <summary><h1>Wijit Form Web Component</h1></summary>

        <zero-md src="/README.md">
            <template>
                <style>

                    pre {
                        background-color: gainsboro;
                        border-radius: 10px;
                        margin: 2rem;
                        overflow: auto;
                        padding: 1rem;
                    }

                    @media (prefers-color-scheme: dark) {
                        * {color: white; }
                        pre { background-color: dimgray }
                    }


                </style>
            </template>
        </zero-md>
    </details>

    <section>
        <header><h2>Demo</h2></header>

        <wijit-form>
            <form action="/tests/test-server.php">

                <section class="row">
                    <div>
                        <label>fetch-options</label>
                        <textarea
                            name="fetch-options"
                            oninput="change(event, 'fetch-options')"
                            placeholder="Example: {headers:{Accept:'text/html'}}"></textarea>
                    </div>

                    <fieldset>
                    <legend>Custom Messages</legend>
                        <div>
                            <label for="demo-waiting">waiting</label>
                            <textarea name="waiting" id="demo-waiting" placeholder="Example: <h1>Waiting</h1>" oninput="change(event, 'waiting')"></textarea>
                        </div>
                        <div>
                            <label for="demo-success">success</label>
                            <textarea name="success" id="demo-success" placeholder="Example: <p>Thanks!</p>" oninput="change(event, 'success')"></textarea>
                        </div>
                        <div>
                            <label for="demo-error">error</label>
                            <textarea name="error" id="demo-error" placeholder="Example: <p>Nope!</p>" oninput="change(event, 'error')"></textarea>
                        </div>
                    </fieldset>

                    <section>
                        <fieldset class="row">
                        <legend>response</legend>
                            <div>
                                <div class="row reverse">
                                    <label for="demo-response-html">html</label>
                                    <input type="radio" name="response" value="html" id="demo-response-html" onchange="change(event, 'response')">
                                </div>
                                <div class="row reverse">
                                    <label for="demo-response-json">json</label>
                                    <input checked type="radio" name="response" value="json" id="demo-response-json" onchange="change(event, 'response')">
                                </div>
                            </div>
                            <hr>
                            <div>
                                <label for="demo-force-error">Force Error</label>
                                <input type="checkbox" name="fail" value="true" id="demo-force-error">
                            </div>
                        </fieldset>

                        <fieldset class="row">
                        <legend>modal</legend>
                            <div>
                                <label for="demo-modal-true">true</label>
                                <input type="radio" id="demo-modal-true" name="modal" value="true" onchange="change(event, 'modal')">
                            </div>
                            <div>
                                <label for="demo-modal-false">false</label>
                                <input checked type="radio" id="demo-modal-false" name="modal" value="false" onchange="change(event, 'modal')">
                            </div>
                        </fieldset>

                        <fieldset class="row">
                        <legend>reset</legend>
                            <div>
                                <label for="demo-reset-true">true</label>
                                <input type="radio" id="demo-reset-true" name="reset" value="true" onchange="change(event, 'reset')">
                            </div>
                            <div>
                                <label for="demo-reset-false">false</label>
                                <input checked type="radio" id="demo-reset-false" name="reset" value="false" onchange="change(event, 'reset')">
                            </div>
                        </fieldset>
                    </section>
                </section>

                <section class="row">
                    <div class="row">
                        <label for="demo-name1">First</label>
                        <input name="first" id="demo-name1" value="Foo" autocomplete="given-name">
                    </div>
                    <div class="row">
                        <label for="demo-name2">Last</label>
                        <input name="last" id="demo-name2" value="Bar" autocomplete="family-name">
                    </div>

                    <button class="primary">Submit</button>
                </section>

            </form>
        </wijit-form>

    </section>

    <script>
        function change (event, attr) {
            const elem = document.querySelector('#demoform');
            let div = event.target.querySelector(`[slot=${attr}]`);

            switch (attr) {
            case 'waiting':
            case 'success':
            case 'error':
                elem[attr] = event.target.value;
                break;
            default:
                elem.setAttribute(attr, event.target.value);
                break;
            }
        }
    </script>
</body>
</html>
