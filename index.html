<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Wijit-Form Web Component</title>
    <link rel="stylesheet" href="/styles.css">
    <script type="module" src="wijit-form.js"></script>
    <script type="module" src="wijit-icon01.js"></script>
    <script type="module" src="sliding-doors.js"></script>

    <!-----------------------------------------
     You can change the colors of the form by changing the values of these css variables
    ------------------------------------------->
    <style>
        :root {
            --bg1: rgb(250,250,250);
            --bg2: rgb(245,245,245);
            --bg3: white;
            --text: rgb(60,60,60);
            --focused: paleturquoise;
            --border: silver;
            --selected: lightgray ;
            --fail: hsl(6, 93%, 80%);
            --pass: hsl(112, 70%, 75%);
            --primary: dodgerblue;
            --secondary: aliceblue ;

            @media (prefers-color-scheme: dark) {
                --text: rgb(240,240,240);
                --bg1: rgb(20,20,20);
                --bg2: rgb(40,40,40);
                --bg3: rgb(60,60,60);
                --border: dimgray;
            }

        }

        wijit-form {
            width: 100%;

            /**** Backgrounds ****/

            button
            { background-color: var(--primary); }

            input,
            select,
            textarea
            { background-color: var(--bg3); }

            .error
            { background-color: var(--fail); }

            .success
            { background-color: var(--pass); }

            /**** Borders ****/

            button,
            input,
            fieldset,
            select,
            textarea,
            .error,
            .success
            {
                border: 1px solid var(--border);
                border-radius: .5rem;
            }

            :user-valid
            { border-color: var(--pass) }

            :user-invalid
            { border-color: var(--fail) }

            /**** Text ****/

            button,
            input,
            fieldset,
            label,
            legend,
            select,
            textarea
            {
                color: var(--text);
                font-size: 1rem;
            }

            label.required:after
            { color: var(--fail) }

            label.required
            { font-size: small }

            label,
            legend,
            .error,
            .success
            { font-weight:bold; }

            .error,
            .success
            { text-align: center; }

            /**** Shadows ****/

            button:hover,
            input[type="submit"]:hover,
            input[type="reset"]:hover
            { box-shadow: 2px 2px 5px black; }

            button:active,
            input[type="submit"]:active,
            input[type="reset"]:active
            { box-shadow: none; }

            /**** Cursor ****/

            input[type="color"],
            input[type="range"],
            label,
            button,
            select
            { cursor: pointer; }

            [disabled]
            { cursor: not-allowed; }

            /**** Structure ****/

            button,
            input,
            option,
            select,
            textarea
            {
                min-height: 35px;
                min-width: 35px;
                padding: .5rem;
            }

            button,
            label
            {
                display: block;
                margin: .5rem;
            }

            fieldset
            { display: inline-block; }

            div > label
            { display: inline-block; }

            fieldset > select,
            fieldset > input
            { width: 100%; }

            input
            { margin-bottom: .5rem }

            label.required:after
            {
                content: "Required";
                vertical-align: super;
            }

            textarea
            {
                height: 100%;
                width: 100%;
            }

            .error,
            .success
            { padding: 1rem; }
        } /**** wijit-form ****/
    </style>
</head>
<body>
    <details>
        <summary><h1>Wijit Form Web Component</h1></summary>
        <p>This component serves simply as a convenience to make styling forms and adding waiting effects and confirmation/error messages less time consuming</p>



        <h2>Attributes</h2>
        <div>
            <ul>
                <li><b>fetch_options (default: null)</b> Acceptable values: [Any valid fetch option from: <a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/API/fetch#options">https://developer.mozilla.org/en-US/docs/Web/API/fetch#options</a>]. For example, if you are submitting the form to the same server, you might want to add <code>{"mode":"same-origin"}</code>. You don't have to add the double quotes around every value, but it cuts down a little on processing if you do. The component will first try to parse it as JSON, then if it fails, it will add double quotes in an attempt to make it valid JSON and parse it again.</li>

                <li><b>waiting_attr (default: "active")</b> Acceptable values: [any string].</li>

                <li><b>waiting_delay (default: "500")</b> Acceptable values: [any integer]. This is the number of milliseconds that will pass between receiving a response from the server after the form is submitted, and showing the confirmation message. Some "waiting" effects may need a little time to finish doing their thing before removing them.</li>
            </ul>
        </div>
    </details>

    <wijit-form id="demoform" reset="false">
        <form action="/test-server.php">
            <fieldset>
                <legend>Demo Form</legend>
                <section id="settings">
                    <fieldset>
                    <legend>fetch-options</legend>
                        <textarea
                            oninput="change(event, 'options')"
                            placeholder="Example: {headers:{Accept:'text/html'}}"></textarea>
                    </fieldset>

                    <fieldset>
                    <legend>Custom Messages</legend>
                        <div>
                        <label for="demo-waiting">waiting</label>
                        <textarea name="waiting" id="demo-waiting" oninput="change(event, 'waiting')"></textarea>
                        </div>

                        <div>
                            <label for="demo-success">success</label>
                            <textarea name="success" id="demo-success" oninput="change(event, 'success')"></textarea>
                        </div>

                        <div>
                            <label for="demo-error">error</label>
                            <textarea name="error" id="demo-error" oninput="change(event, 'error')"></textarea>
                        </div>
                    </fieldset>

                    <fieldset>
                    <legend>Response Type</legend>
                        <div>
                            <input type="radio" name="response" value="html" id="demo-response-html" onchange="change(event, 'response')">
                            <label for="demo-response-html">html</label>
                        </div>
                        <div>
                            <input checked type="radio" name="response" value="json" id="demo-response-json" onchange="change(event, 'response')">
                            <label for="demo-response-json">json</label>
                        </div>
                    </fieldset>

                    <fieldset>
                    <legend>Modal Dialog</legend>
                        <div>
                            <input type="radio" id="demo-modal-true" name="modal" value="true" onchange="change(event, 'modal')">
                            <label for="demo-modal-true">true</label>
                        </div>
                        <div>
                            <input checked type="radio" id="demo-modal-false" name="modal" value="false" onchange="change(event, 'modal')">
                            <label for="demo-modal-false">false</label>
                        </div>
                    </fieldset>
                </section>
                <section  class="flex row bottom">
                    <span>
                        <label for="demo-name1">First</label>
                        <input name="first" id="demo-name1" value="Foo" autocomplete="_given-name">
                    </span>
                    <span>
                        <label for="demo-name2">Last</label>
                        <input name="last" id="demo-name2" value="Bar" autocomplete="_family-name">
                    </span>

                    <button>Submit</button>
                </section>
            </fieldset>
        </form>
    </wijit-form>

    <section>
        <article>
            <h3>Basic Example</h3>
            <!-- <wijit-form>
                <form action="/test-server.php">
                    <label for="ex1-name">Name</label>
                    <input id="ex1-name" name="name">

                    <label for="ex1-email">Email</label>
                    <input type="email" id="ex1-email" name="email">

                    <button>Spam Me!</button>
                </form>
            </wijit-form> -->
        </article>

        <article>
            <h3>User Supplied Messages</h3>
            <wijit-form>
                <form action="/test-server.php">
                    <label for="ex2-name">Name</label>
                    <input id="ex2-name" name="name" value="Foo">

                    <label for="ex2-email">Email</label>
                    <input type="email" id="ex2-email" name="email">

                    <button>Spam Me!</button>
                </form>

                <!-- This element's slot is assign to "waiting". It is shown while awaiting a response from the server -->
                <wijit-icon01 animate color="lime" slot="waiting"></wijit-icon01>

                <!-- This element's slot is assignt to "success". It is shown when the server sends a status code less than 400 (not an error) -->
                <div slot="success">
                    <div>Name: {{data.name}}</div>
                    <p>I'm using data.name from the json data sent from the server.</p>
                </div>

                <!-- This element's slot is assigned to "error". It is shown when the server sends a status code greater than 399 (error) -->
                <div slot="error">
                    <h2>Something went wrong.</h2>
                    <p>Your submission was not processed.</p>
                </div>
            </wijit-form>
        </article>

        <article>
            <h3>HTML response from server</h3>
            <!-- <wijit-form response="html">
                <form action="/test-server.php">
                    <div>
                        <label for="ex3-name">Name</label>
                        <input id="ex3-name" name="name">
                    </div>
                    <div>
                        <label for="ex3-email">Email</label>
                        <input type="email" id="ex3-email" name="enail">
                    </div>
                    <div style="text-align:center">
                        <button>Spammie!</button>
                    </div>
                </form>
            </wijit-form> -->
        </article>

        <article>
            <h3>Modal Dialog</h3>
            <!-- <wijit-form modal>
                <form action="/test-server.php">
                    <div>
                        <label for="ex4-name">Name</label>
                        <input id="ex4-name" name="name">
                    </div>
                    <div>
                        <label for="ex4-email">Email</label>
                        <input type="email" id="ex4-email" name="enail">
                    </div>
                    <div style="text-align:center">
                        <button>Spammie!</button>
                    </div>
                </form>
            </wijit-form> -->
        </article>
    </section>

    <!-- <section>
        <article>
            <wijit-form waiting_attr="active" waiting_delay="500" options="{headers:{Accept:'text/html'}}">
                <form id="test-form" method="post" action="/test-server.php">

                    <div class="flex column">
                        <label for="name">Name</label>
                        <input required type="text" id="name" name="Name" autocomplete="_name" value="Foo Barr">
                    </div>

                    <div class="flex column">
                        <label class="required" for="email">Email</label>
                        <input required type="email" id="email" name="Email" autocomplete="_email" value="foo@barr.com">
                    </div>

                    <div class="flex row-reverse start">
                        <label for="checkbox">Checkbox</label>
                        <input type="checkbox" name="Checkbox" id="checkbox" value="Yes" aria-role="checkbox" tabindex="0">
                    </div>

                    <fieldset>
                        <legend>Choose One</legend>

                        <div class="flex row-reverse start">
                            <label for="ochoice1">One</label>
                            <input checked type="radio" name="Other Choice" id="ochoice1" value="One" aria-role="radio" tabindex="0">
                        </div>
                        <div class="flex row-reverse start">
                            <label for="ochoice2">Two</label>
                            <input type="radio" name="Other Choice" id="ochoice2" value="Two" aria-role="radio" tabindex="0">
                        </div>
                    </fieldset>

                    <div class="flex column">
                        <label for="select-one">Select</label>
                        <select id="select-one">
                            <option disabled selected></option>
                            <option>one</option>
                            <option>two</option>
                            <option>three</option>
                        </select>
                    </div>

                    <div class="flex column">
                        <label for="favorite-color">Fav Color</label>
                        <input name="Favorite Color" id="favorite-color" list="fav-colors" placeholder="Favorite Color">
                        <datalist id="fav-colors">
                            <option>red</option>
                            <option>blue</option>
                            <option>green</option>
                            <option>yellow</option>
                        </datalist>
                    </div>

                    <div class="flex column">
                        <label for="multi-choices">Multiple Choice</label>
                        <select multiple name="Multi Choices" id="multi-choices">
                            <option>One</option>
                            <option selected>Two</option>
                            <option>Three</option>
                        </select>
                    </div>

                    <div class="flex center">
                        <button type="submit" class="primary">Submit</button>
                        <button type="reset" class="secondary">Reset</button>
                    </div>
                </form>

                <sliding-doors slot="waiting" theme="auto" style="height:100%">
                    <wijit-icon01 animate color="lime" slot="effect">
                        <b>Check out this eye candy<br>while you wait</b>
                    </wijit-icon01>
                </sliding-doors>

                <div slot="success"><h1>Hi {{Name}}</h1><p>Thanks for sharing! Here is what you submitted:</p><pre>{{data}}</pre></div>

                <div slot="error">
                    <h1>Oopsie!</h1>
                    <p>There was an error. Please get help from someone who has a clue.</p>
                </div>
            </wijit-form>
        </article>
    </section> -->

    <script>
        function change (event, attr) {
            const elem = document.querySelector('#demoform');
            let div = event.target.querySelector(`[slot=${attr}]`);

            switch (attr) {
            case 'waiting':
            case 'success':
            case 'error':
                elem[attr] = event.target.value;
                break;
            default:
                elem.setAttribute(attr, event.target.value);
                break;
            }
        }
    </script>
</body>
</html>
